<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aether Markets | Access</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Login-specific minimal layout */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: radial-gradient(circle at top right, #0F1F35, #050b14);
    }
  </style>
</head>

<body class="theme-corporate">

  <div class="card animate-fade-in"
    style="width: 100%; max-width: 420px; text-align: center; border-top: 4px solid var(--color-brand-teal);">
    <div style="margin-bottom: var(--space-xl);">
      <!-- Logo -->
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"
        class="animate-float" style="margin: 0 auto 1rem auto;">
        <circle cx="24" cy="24" r="24" fill="url(#paint0_linear)" />
        <path d="M16 24L22 30L32 18" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
        <defs>
          <linearGradient id="paint0_linear" x1="6" y1="6" x2="42" y2="42" gradientUnits="userSpaceOnUse">
            <stop stop-color="#1FB6A8" />
            <stop offset="1" stop-color="#0B2A4A" />
          </linearGradient>
        </defs>
      </svg>

      <h1 class="text-2xl" style="color: var(--color-text-main);">Aether Markets</h1>
      <p class="text-sm text-muted">Institutional Grade Trading</p>
    </div>

    <form id="loginForm" class="flex flex-col gap-md">
      <div style="text-align: left;">
        <label for="email" class="text-xs text-muted"
          style="margin-bottom: 6px; display: block; font-weight: 500;">ACCESS IDENTITY</label>
        <input type="email" id="email" class="input" placeholder="authorized.user@aether.com" required
          autocomplete="email">
      </div>

      <button type="submit" class="btn btn-primary" style="padding: 0.875rem; font-size: 1rem;">
        Authenticate Session
      </button>
    </form>

    <div id="errorMsg" class="text-danger text-sm hidden" style="margin-top: 1rem;"></div>

    <div class="text-xs text-muted"
      style="margin-top: var(--space-xl); border-top: 1px solid var(--color-border); padding-top: var(--space-md);">
      <p style="margin-bottom: 0.5rem; letter-spacing: 0.05em; text-transform: uppercase;">Simulation Users</p>
      <div class="flex justify-center gap-md">
        <span class="cursor-pointer hover:text-white transition-colors"
          onclick="document.getElementById('email').value='alice@example.com'">alice@example.com</span>
        <span class="cursor-pointer hover:text-white transition-colors"
          onclick="document.getElementById('email').value='bob@example.com'">bob@example.com</span>
      </div>
    </div>
  </div>

  <script src="js/utils/formatters.js" type="module"></script>
  <script type="module">
    const form = document.getElementById('loginForm');
    const errorMsg = document.getElementById('errorMsg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;

      try {
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email })
        });

        const data = await res.json();
        if (res.ok) {
          localStorage.setItem('aether_token', data.token);
          localStorage.setItem('aether_user', data.email);
          window.location.href = 'dashboard.html';
        } else {
          errorMsg.textContent = data.error || 'Login failed';
          errorMsg.classList.remove('hidden');
        }
      } catch (err) {
        console.error(err);
        errorMsg.textContent = 'Connection error';
        errorMsg.classList.remove('hidden');
      }
    });
  </script>
</body>

</html>